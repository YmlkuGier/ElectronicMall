{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport API from \"../../utils/request\";\nvar url = \"/api/order/\";\nexport default {\n  name: \"Order\",\n  data: function data() {\n    return {\n      options: [],\n      searchMode: \"\",\n      searchText: \"\",\n      user: {},\n      tableData: [],\n      pageNum: 1,\n      pageSize: 8,\n      entity: {},\n      total: 0,\n      dialogFormVisible: false,\n      detail: [],\n      baseApi: this.$store.state.baseApi\n    };\n  },\n  created: function created() {\n    this.load();\n  },\n  methods: {\n    handleSizeChange: function handleSizeChange(pageSize) {\n      this.pageSize = pageSize;\n      this.load();\n    },\n    handleCurrentChange: function handleCurrentChange(pageNum) {\n      this.pageNum = pageNum;\n      this.load();\n    },\n    reset: function reset() {\n      this.searchMode = \"\";\n      this.searchText = \"\";\n      this.load();\n    },\n    load: function load() {\n      var _this = this;\n\n      API.get(url + \"/page\", {\n        params: {\n          pageNum: this.pageNum,\n          pageSize: this.pageSize,\n          orderNo: this.searchText,\n          state: this.searchMode\n        }\n      }).then(function (res) {\n        _this.tableData = res.data.records || [];\n        _this.total = res.data.total;\n      }).catch(function (e) {\n        if (e.response.data == undefined) {\n          _this.$message({\n            showClose: true,\n            message: e,\n            type: \"error\",\n            duration: 5000\n          });\n        } else {\n          _this.$message({\n            showClose: true,\n            message: e.response.data,\n            type: \"error\",\n            duration: 5000\n          });\n        }\n      });\n    },\n    showDetail: function showDetail(row) {\n      var _this2 = this;\n\n      this.request.get(\"/api/order/orderNo/\" + row.orderNo).then(function (res) {\n        if (res.code === \"200\") {\n          _this2.detail = [];\n\n          _this2.detail.push(res.data);\n\n          _this2.dialogFormVisible = true;\n        }\n      });\n    },\n    //发货\n    delivery: function delivery(order) {\n      var _this3 = this;\n\n      this.request.get(\"/api/order/delivery/\" + order.orderNo).then(function (res) {\n        if (res.code === \"200\") {\n          _this3.$message.success(\"成功发货\");\n\n          order.state = \"已发货\";\n        }\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsKA;AACA;AAGA;AACAA,eADA;AAEAC,MAFA,kBAEA;AACA;AACAC,iBADA;AAEAC,oBAFA;AAGAC,oBAHA;AAIAC,cAJA;AAKAC,mBALA;AAMAC,gBANA;AAOAC,iBAPA;AAQAC,gBARA;AASAC,cATA;AAUAC,8BAVA;AAWAC,gBAXA;AAYAC;AAZA;AAcA,GAjBA;AAkBAC,SAlBA,qBAkBA;AACA;AACA,GApBA;AAqBAC;AACAC,oBADA,4BACAR,QADA,EACA;AACA;AACA;AACA,KAJA;AAKAS,uBALA,+BAKAV,OALA,EAKA;AACA;AACA;AACA,KARA;AASAW,SATA,mBASA;AACA;AACA;AACA;AACA,KAbA;AAcAC,QAdA,kBAcA;AAAA;;AACAC;AACAC;AACAd,+BADA;AAEAC,iCAFA;AAGAc,kCAHA;AAIAC;AAJA;AADA,SAQAC,IARA,CAQA;AACA;AACA;AAEA,OAZA,EAaAC,KAbA,CAaA;AACA;AACA;AACAC,2BADA;AAEAC,sBAFA;AAGAC,yBAHA;AAIAC;AAJA;AAMA,SAPA,MAOA;AACA;AACAH,2BADA;AAEAC,oCAFA;AAGAC,yBAHA;AAIAC;AAJA;AAMA;AAEA,OA9BA;AA+BA,KA9CA;AA+CAC,cA/CA,sBA+CAC,GA/CA,EA+CA;AAAA;;AACA,mBACAC,GADA,CACA,mCADA,EAEAR,IAFA,CAEA;AACA;AACA;;AACA;;AACA;AACA;AACA,OARA;AASA,KAzDA;AA0DA;AACAS,YA3DA,oBA2DAC,KA3DA,EA2DA;AAAA;;AACA,mBACAF,GADA,CACA,sCADA,EAEAR,IAFA,CAEA;AACA;AACA;;AACAU;AACA;AACA,OAPA;AAQA;AApEA;AArBA","names":["name","data","options","searchMode","searchText","user","tableData","pageNum","pageSize","entity","total","dialogFormVisible","detail","baseApi","created","methods","handleSizeChange","handleCurrentChange","reset","load","API","params","orderNo","state","then","catch","showClose","message","type","duration","showDetail","row","get","delivery","order"],"sourceRoot":"src/views/manage","sources":["Order.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <div>\r\n            <el-select\r\n                v-model=\"searchMode\"\r\n                placeholder=\"请选择订单类型\"\r\n                style=\"width: 150px; margin-right: 10px\"\r\n            >\r\n                <el-option value=\"已支付\" label=\"已支付\"></el-option>\r\n                <el-option value=\"已发货\" label=\"已发货\"></el-option>\r\n                <el-option value=\"已收货\" label=\"已收货\"></el-option>\r\n            </el-select>\r\n            <el-input\r\n                v-model=\"searchText\"\r\n                @keyup.enter.native=\"load\"\r\n                style=\"width: 200px\"\r\n            >\r\n                <i slot=\"prefix\" class=\"el-input__icon iconfont icon-r-find\"></i\r\n            ></el-input>\r\n            <el-button @click=\"reset\" type=\"warning\" style=\"margin: 10px\">\r\n                <i class=\"iconfont icon-r-refresh\"></i>\r\n                重置\r\n            </el-button>\r\n            <el-button @click=\"load\" type=\"primary\" style=\"margin: 10px\">\r\n                <i class=\"iconfont icon-r-find\"></i>\r\n                搜索\r\n            </el-button>\r\n        </div>\r\n        <el-table :data=\"tableData\" border stripe style=\"width: 100%\">\r\n            <el-table-column prop=\"id\" label=\"ID\" width=\"50\" sortable>\r\n            </el-table-column>\r\n            <el-table-column\r\n                prop=\"orderNo\"\r\n                label=\"订单编号\"\r\n                width=\"200\"\r\n            ></el-table-column>\r\n            <el-table-column\r\n                prop=\"totalPrice\"\r\n                label=\"总价\"\r\n                width=\"100\"\r\n            ></el-table-column>\r\n            <el-table-column\r\n                prop=\"userId\"\r\n                label=\"下单人id\"\r\n                width=\"100\"\r\n            ></el-table-column>\r\n            <el-table-column\r\n                prop=\"linkUser\"\r\n                label=\"联系人\"\r\n                width=\"150\"\r\n            ></el-table-column>\r\n            <el-table-column\r\n                prop=\"linkPhone\"\r\n                label=\"联系电话\"\r\n            ></el-table-column>\r\n            <el-table-column\r\n                prop=\"linkAddress\"\r\n                label=\"送货地址\"\r\n                width=\"300\"\r\n            ></el-table-column>\r\n            <el-table-column prop=\"state\" label=\"状态\" width=\"100\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-tag\r\n                        type=\"success\"\r\n                        v-if=\"scope.row.state === '已支付'\"\r\n                        >{{ scope.row.state }}</el-tag\r\n                    >\r\n                    <el-tag\r\n                        type=\"primary\"\r\n                        v-if=\"scope.row.state === '已发货'\"\r\n                        >{{ scope.row.state }}</el-tag\r\n                    >\r\n                    <el-tag type=\"info\" v-if=\"scope.row.state === '已收货'\">{{\r\n                        scope.row.state\r\n                    }}</el-tag>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column\r\n                prop=\"createTime\"\r\n                label=\"下单时间\"\r\n            ></el-table-column>\r\n            <el-table-column fixed=\"right\" label=\"操作\" width=\"250\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-button\r\n                        type=\"primary\"\r\n                        style=\"font-size: 18px\"\r\n                        @click=\"showDetail(scope.row)\"\r\n                    >\r\n                        <i class=\"iconfont icon-r-find\" style=\"font-size: 22px\"></i>\r\n                        详情\r\n                    </el-button>\r\n                    <el-popconfirm\r\n                        @confirm=\"delivery(scope.row)\"\r\n                        title=\"确定发货吗？\"\r\n                        v-if=\"scope.row.state === '已支付'\"\r\n                    >\r\n                        <el-button\r\n                            type=\"primary\"\r\n                            style=\"font-size: 18px; margin-left: 10px\"\r\n                            slot=\"reference\"\r\n                        >\r\n                            <i class=\"iconfont icon-r-add\" style=\"font-size: 22px\"></i>\r\n                            发货\r\n                        </el-button>\r\n                    </el-popconfirm>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n        <!--    分页-->\r\n        <div style=\"margin-top: 10px\">\r\n            <el-pagination\r\n                @size-change=\"handleSizeChange\"\r\n                @current-change=\"handleCurrentChange\"\r\n                :current-page=\"pageNum\"\r\n                :page-size=\"pageSize\"\r\n                :page-sizes=\"[3, 5, 8, 10]\"\r\n                layout=\"total, sizes, prev, pager, next, jumper\"\r\n                :total=\"total\"\r\n            >\r\n            </el-pagination>\r\n        </div>\r\n        <!--    详情弹窗-->\r\n        <el-dialog :visible.sync=\"dialogFormVisible\">\r\n            <el-table :data=\"detail\" background-color=\"black\">\r\n                <el-table-column label=\"图片\" width=\"150\">\r\n                    <template slot-scope=\"scope\">\r\n                        <img\r\n                            :src=\"baseApi + scope.row.img\"\r\n                            min-width=\"100\"\r\n                            height=\"100\"\r\n                        />\r\n                    </template>\r\n                </el-table-column>\r\n\r\n                <el-table-column prop=\"goodId\" label=\"商品id\"></el-table-column>\r\n                <el-table-column\r\n                    prop=\"goodName\"\r\n                    label=\"商品名称\"\r\n                ></el-table-column>\r\n                <el-table-column\r\n                    prop=\"standard\"\r\n                    label=\"商品规格\"\r\n                ></el-table-column>\r\n                <el-table-column prop=\"price\" label=\"单价\"></el-table-column>\r\n                <el-table-column prop=\"discount\" label=\"折扣\"></el-table-column>\r\n                <el-table-column label=\"实价\">\r\n                    <template slot-scope=\"scope\">\r\n                        {{ scope.row.price * scope.row.discount }}\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column prop=\"count\" label=\"数量\"></el-table-column>\r\n                <el-table-column label=\"总价\">\r\n                    <template slot-scope=\"scope\">\r\n                        {{\r\n                            scope.row.price *\r\n                            scope.row.discount *\r\n                            scope.row.count\r\n                        }}\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport API from \"../../utils/request\";\r\nconst url = \"/api/order/\";\r\n\r\n\r\nexport default {\r\n    name: \"Order\",\r\n    data() {\r\n        return {\r\n            options: [],\r\n            searchMode: \"\",\r\n            searchText: \"\",\r\n            user: {},\r\n            tableData: [],\r\n            pageNum: 1,\r\n            pageSize: 8,\r\n            entity: {},\r\n            total: 0,\r\n            dialogFormVisible: false,\r\n            detail: [],\r\n            baseApi: this.$store.state.baseApi,\r\n        };\r\n    },\r\n    created() {\r\n        this.load();\r\n    },\r\n    methods: {\r\n        handleSizeChange(pageSize) {\r\n            this.pageSize = pageSize;\r\n            this.load();\r\n        },\r\n        handleCurrentChange(pageNum) {\r\n            this.pageNum = pageNum;\r\n            this.load();\r\n        },\r\n        reset() {\r\n            this.searchMode = \"\";\r\n            this.searchText = \"\";\r\n            this.load();\r\n        },\r\n        load() {\r\n            API.get(url + \"/page\", {\r\n                params: {\r\n                    pageNum: this.pageNum,\r\n                    pageSize: this.pageSize,\r\n                    orderNo: this.searchText,\r\n                    state: this.searchMode,\r\n                },\r\n            })\r\n                .then((res) => {\r\n                    this.tableData = res.data.records || [];\r\n                    this.total = res.data.total;\r\n                    \r\n                })\r\n                .catch((e) => {\r\n                    if (e.response.data == undefined) {\r\n                        this.$message({\r\n                            showClose: true,\r\n                            message: e,\r\n                            type: \"error\",\r\n                            duration: 5000,\r\n                        });\r\n                    } else {\r\n                        this.$message({\r\n                            showClose: true,\r\n                            message: e.response.data,\r\n                            type: \"error\",\r\n                            duration: 5000,\r\n                        });\r\n                    }\r\n                    \r\n                });\r\n        },\r\n        showDetail(row) {\r\n            this.request\r\n                .get(\"/api/order/orderNo/\" + row.orderNo)\r\n                .then((res) => {\r\n                    if (res.code === \"200\") {\r\n                        this.detail = [];\r\n                        this.detail.push(res.data);\r\n                        this.dialogFormVisible = true;\r\n                    }\r\n                });\r\n        },\r\n        //发货\r\n        delivery(order) {\r\n            this.request\r\n                .get(\"/api/order/delivery/\" + order.orderNo)\r\n                .then((res) => {\r\n                    if (res.code === \"200\") {\r\n                        this.$message.success(\"成功发货\");\r\n                        order.state = \"已发货\";\r\n                    }\r\n                });\r\n        },\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}